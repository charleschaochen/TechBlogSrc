title: Web攻击-XSS与CSRF的简单介绍
date: 2013-12-25 17:58:00.0
tags:
- XSS
- CSRF
- web安全
categories:
- WEB前端

---

一、XSS攻击1、What is XSS XSS(cross site scripting)跨站脚本攻击。简单来说，就是攻击者通过在web页面中注入恶意脚本，当其他用户访问该页面时，这些脚本就会被执行，从而达到攻击的目的。攻击者通常通过xss攻击盗取用户的Cookies或植入病毒；2、XSS攻击有三类： （1）持久性XSS攻击（存储型）攻击者通过在某系统提交一些恶意脚本，这些脚...

<!-- more -->

**一、XSS攻击**

1、What is XSS

 

XSS(cross site scripting)跨站脚本攻击。简单来说，就是攻击者通过在web页面中注入恶意脚本，当其他用户访问该页面时，这些脚本就会被执行，从而达到攻击的目的。攻击者通常通过xss攻击盗取用户的Cookies或植入病毒；

  


2、XSS攻击有三类：

 

（1）持久性XSS攻击（存储型）

攻击者通过在某系统提交一些恶意脚本，这些脚本被保存到系统的数据库，当其他用户访问到这些内容时，恶意脚本就会被执行，从而达到攻击的目的。由于这些脚本是持久化存在数据库中，所以称为持久性XSS攻击。例如，攻击者在填写个人资料页面中提交了恶意的脚本，这些脚本被保存到系统的数据库，当其他用户访问攻击者的个人资料时，系统将数据库中的恶意脚本显示页面上自动执行，就会对访问的用户造成危害；

 

（2）非持久性XSS攻击（反射型）

攻击者通过把恶意脚本经过编码处理后作为参数添加到url中，当其他用户访问该链接时，恶意脚本就会被执行，从而达到攻击的目的。由于这种攻击是用户点击恶意链接后脚本立即被执行，所以称为非持久型或反射型；

 

（3）DOM XSS攻击

这种攻击是由于网站本身的脚本处理逻辑导致的漏洞引起的。例如有些网站会利用document.url获取当前链接，再提取参数后，通过document.write输出在页面上，如果此时参数中包含恶意脚本，访问的用户将会收到攻击。

  


3、同源策略

 

同源策略是Netscape（网景）公司提出的一个web安全策略，即一个站点的脚本只能访问与其“同源”的资源，包括请求相应包或Cookies，所谓同源是指同协议、同域名、同端口。在同源策略提出之前，一个站点的脚本可以跨域去访问另一个站点的资源，这就会造成很大的危害。例如，一个恶意站点，通过iframe标签引入一个合法的银行登录页面，用户在该页面输入登录信息后，恶意站点就可以通过脚本获取到银行系统的Cookies，从而盗取用户的信息。

 

**二、CSRF攻击**

 

1、What is CSRF

 

CSRF（cross site request forgery）跨站请求伪造，简单来说就是攻击者伪造合法身份发送恶意请求。例如，合法账户A登录了站点W，W就在A的浏览器中产生了Cookies，此时如果攻击者B发送了一个恶意网页给A，A不小心点击后，恶意网页自动向站点W发送请求，此时这个请求带有A的合法Cookies，站点W认为这个请求是合法的，但请求的内容确是攻击者B可以恶意构造的，这时候便形成了攻击。

  


2、攻击实例

 

假设某银行的转账请求的url是http://www.xxbc.com/toAccount=xx&money=xx，参数toAccount表示要转账的账户，money表示转账金额。

某用户A登录了该银行的站点，而此时攻击者B发送了一个网页链接给A，该网页的内容是一段Javascript脚本，如下：

    <script type="text/javascript">
        window.onload=function(){
             location.href='http://www.xxbc.com/toAccount=攻击者B的Id&money=1000';
         }
    </script>

 

这时候，用户A不小心点击了该链接，该网页就会带着A的Cookies向银行系统发送请求，银行系统收到请求后，由于Cookies是合法的，便执行了转账操作，将A账户上的1000元转账给了攻击者B，攻击者成功实现了CSRF攻击。

  


3、防御策略

 

CSRF的具体防御方式很多，但总的思想是一致的，就是在客户端和表单中都加入token值，然后在服务器端进行验证。

  


一般步骤如下：

 

1、编写生成token的后台程序，将生成的token值存入客户端cookies；

 

2、在表单中添加hidden隐藏域，值为同一个token值；

 

3、表单提交后，在服务器段验证客户端cookies保存的token值与表单提交的token值是否一致，只有一致的情况下才执行相应的操作。

 